<lift:surround with="default" at="content">
  
  <head_merge>
    <script type="text/javascript" src="/js/jquery.simplemodal.1.4.1.min.js"></script>
    <script type="text/javascript" lift="test_cond.loggedin">
    //<![CDATA[
      $(function(){
        $('#newVersionBtn').click(function(){
          $('#newVersionModal').modal({ closeClass: 'close' });
        });
      });
      function prependNewVersionRow(version, compatibiltiy){
        $('#versions').prepend('<tr>'+
          '<td>'+version+'</td>'+
          '<td>'+compatibiltiy+'</td>'+
        '</tr>');
        // close the modal dialog programaticlaly. 
        // this is hacky as fuck tho.
        $('#newVersionModal').hide();
        $('#simplemodal-overlay').hide();
      }
    //]]>
    </script>
  </head_merge>
  
  <div class="row project">
    <div class="span10 columns box" lift="information">
      <h2>Project: <name>Name</name></h2>
      <div class="restrict description">
        <description />
      </div>
      
      <h2>Compatibility</h2>
      <div class="restrict">
        <div class="row">
          <p class="span6 columns">Versions of <name></name> are compatible with:</p>
          <div class="span2 columns">
            <a class="btn success" id="newVersionBtn" lift="test_cond.loggedin">Add version</a>
            <a class="btn success disabled" id="newVersionBtn" lift="test_cond.loggedout">Add version</a>
          </div>
          
        </div>
        
        <table class="zebra-striped">
          <thead>
            <th>Version</th>
            <th>Scala Version</th>
          </thead>
          <tbody id="versions" lift="versions">
            <tr>
              <td><version></version></td>
              <td><scalaversion></scalaversion></td>
            </tr>
          </tbody>
        </table>
        
      </div>
      
      <h2>Usage</h2>
      <div class="restrict">
        <p><strong>SBT 0.10+</strong></p>
        <pre>libraryDependencies += 
  "com.novus" %% "salat-util" % "0.0.8-SNAPSHOT"

resolvers += 
  Resolver.url("salat", url("http://repo.novus.com/snapshots/"))</pre>
        <p><strong>Maven</strong></p>
        <pre>
&lt;dependency&gt;
  &lt;groupId&gt;com.novus&lt;/groupId&gt;
  &lt;artifactId&gt;salat-util&lt;/artifactId&gt;
  &lt;version&gt;0.0.8-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</pre>
      </div>
      
    </div>
    
    <div class="span5 columns box contributors">
      <h2>Overview</h2>
      <div class="overview">
        <ul lift="overview">
          <li><strong>Version</strong>: <latest_version></latest_version></li>
          <li><strong>Age</strong>: <age></age></li>
          <li><strong>Contributors</strong>: <contributor_count></contributor_count></li>
        </ul>
        <div class="activity" style="clear: both" lift="information">
          <img alt="activity" src="/images/activity-moderate.png" />
          <span class="activity-text"><strong>Fair</strong></span>
        </div>
      </div>
      
      <h2>Contributors</h2>
      <ol>
        <li class="row buffer"></li>
        <li class="row" lift="contributors">
          <span class="avatar-frame">
            <img src="http://0.gravatar.com/avatar/63bc2441352e761a0eff115fb713a904?s=69&d=monsterid" />
            <span class="overlay"></span>
          </span>
          <h4>Timothy Perrett</h4>
          <p>127 commits</p>
        </li><!-- eo.row -->
        
      </ol>
    </div>
    
  </div>
  
  <lift:tail>
    <lift:test_cond.loggedin>
      <lift:version_wizard ajax="true" />
    </lift:test_cond.loggedin>
  </lift:tail>
  
  <script type="text/javascript" lift="tail">
  //<![CDATA[
  $(function(){
    $('ol li.row:gt(7)').hide();
    $('ol li.row:nth-child(8)').after("<li><a id='morecontributors' href='#'>Show all...</a></li>");
    $('#morecontributors').live('click', function() {
      var li = $(this).parents("li:first");
      li.parent().children().show();
      li.remove();
      return false;
    });
  });
  //]]>
  </script>
  
</lift:surround>